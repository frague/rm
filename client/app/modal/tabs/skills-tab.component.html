<spinner [isShown]="isLoading">
  <div class="skills row">
    <div class="col-md-7">
      <ul class="categories" *ngIf="skills && skills.skillsDefined">
        <ng-container *ngFor="let category of skills.categories">
          <li *ngIf="category.skillsDefined">
            <h2>{{ category.name }}</h2>
            <ul *ngIf="category.categories">
              <ng-container *ngFor="let sub of category.categories">
                <li *ngIf="sub.skillsDefined">
                  <h3>{{ sub.name }}</h3>
                  <skillset [skills]="sub.skills"></skillset>
                </li>
              </ng-container>
            </ul>
            <skillset [skills]="category.skills"></skillset>
          </li>
        </ng-container>
      </ul>
    </div>
    <div class="col-md-5" *ngIf="skillsInfo">
      <h2>Surveys</h2>
      <ng-container *ngFor="let state of surveyStates|keys">
        <ng-container *ngIf="skillsInfo.surveys[state]">
          <h3>{{ surveyStates[state] }}</h3>
          <ul *ngIf="skillsInfo.surveys" class="surveys">
            <li *ngFor="let survey of skillsInfo.surveys[state]">
              <b>{{ survey.grade_id }}
              {{ survey.name }}</b>:
              {{ survey.declared_percent }}% declared,
              {{ survey.approved_percent }}% approved
            </li>
          </ul>
        </ng-container>
      </ng-container>
    </div>
  </div>
</spinner>
