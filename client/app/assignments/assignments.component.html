<div>
  <h4>Assignments</h4>

  <assignment-modal [resources]="resourcesById" [initiatives]="initiatives"></assignment-modal>

  <person-modal></person-modal>

  <demand-modal></demand-modal>

  <div class="row">
    <div class="col-md-2"></div>
    <div class="col-md-10"></div>
  </div>

  <div class="assignments row" *ngIf="items.length">
    <div class="col-md-2 people lines">
      <div
        *ngFor="let assignee of items; let i = index"
        class="line"
        [ngClass]="getAssignmentsCount(i)"
        (click)="showResource(assignee)"
      >{{ makeCaption(assignee) }}</div>
    </div>
    <div class="col-md-10 schedule" #schedule>
      <div
        [ngStyle]="getScheduleStyles()"
        class="lines"
        (click)="setMarker($event)"
      >
        <ol>
          <li class="today" [ngStyle]="{left: todayOffset + 2 + 'px'}">{{ todayCaption }}</li>
          <li class="marker" [ngStyle]="makeCaptionStyles(markerDateOffset)">{{ markerDateCaption }}</li>
          <li *ngFor="let week of weekTitles">{{ week }}</li>
        </ol>

        <div *ngFor="let assignee of items; let i = index" class="line" [ngClass]="getAssignmentsCount(i)">
          <span *ngFor="let assignmentsGroup of getAssignmentsGroups(assignee.assignments, assignee)" >
            <initiative
              *ngFor="let assignment of assignmentsGroup"
              [data]="getAssignment(assignment)"
              (click)="showAssignment(assignment, $event)"
            ></initiative>
          </span>
        </div>
      </div>
    </div>
  </div>
</div>